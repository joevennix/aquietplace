<!--
  A localStorage shim for schemes that don't support it,
  like data: in Chrome.
-->
<!doctype html>
<html>
<body>
<script>
window.onmessage = function(e) {
	// simply evaluate and send back the result.
	var origin = e.origin || 'data://';
	var key = origin + '#' + e.data.key;
	var value = null;

	if (e.data) {
		if (e.data.set) {
			localStorage[key] = e.data.value;
		} else if (e.data.get) {
			e.source.postMessage({value: localStorage[key], key: e.data.key}, '*');
		}
	}
};
</script>
</body>
</html>